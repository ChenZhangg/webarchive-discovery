@(q: uk.bl.wa.shine.Query)

@main(q.query) {
    
   <h1>@(q.query)</h1>
   
   <form action="@(routes.Application.search(""))" method="get">
     <input type="text" name="query" value="@(q.query)"/>
     <input type="submit"/>

<ul> 
@for(d <- q.res.getResults()) {
  <li><a href="http://web.archive.org/web/@(d.getFirstValue("wayback_date"))/@(d.getFirstValue("url"))">@d.getFirstValue("title")</a><br/>
   @d.getFirstValue("crawl_date"), @d.getFirstValue("content_type_norm"), @d.getFirstValue("content_type_full")</li>
}
</ul>


@for(fc <- q.res.getFacetFields()) {
    <h3>@(fc.getName()) (@(fc.getValueCount()))</h3>
    <ul>
    @for(f <- fc.getValues() ) {
        <li>
          <input type="checkbox" name="facet.in.@(fc.getName())" value="@(f.getName())" @(q.getCheckedInString(fc.getName(),f.getName())) />
          <a href="@(routes.Application.search(q.query))@(q.getParamsPlusFilter(fc.getName(),f.getName()))">@(f.getName()) (@(f.getCount()))</a>
          <input type="checkbox" name="facet.out.@(fc.getName())" value="@(f.getName())" @(q.getCheckedOutString(fc.getName(),f.getName())) />
        </li>
        <!-- dynamically add checked="true"? -->
        <!-- OR use some kind of link constructor? -->
    } 
    </ul>
}

   </form>
}
